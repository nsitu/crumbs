<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link
        rel="icon"
        type="image/svg+xml"
        href="/draw.svg"
    />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    />
    <title>Aâ€‘Frame Path Tracer</title>

</head>

<body>
    <a-scene 
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: true"
        background="color: #ECECEC"
        webxr="requiredFeatures: local-floor; optionalFeatures: bounded-floor"
    >
        <!-- Camera with room-scale tracking -->
        <a-entity id="cameraRig" 
                  position="0 0 0"
                  webxr-camera-rig>
            <a-camera 
                look-controls="pointerLockEnabled: false; touchEnabled: true; magicWindowTrackingEnabled: true"
                wasd-controls="enabled: true; acceleration: 15"
                position="0 1.6 0">
            </a-camera>
        </a-entity>

        <!-- Scene objects -->
        <a-box
            position="-1 0.5 -3"
            rotation="0 45 0"
            color="#4CC3D9"
        ></a-box>
        <a-sphere
            position="0 1.25 -5"
            radius="1.25"
            color="#EF2D5E"
        ></a-sphere>
        <a-cylinder
            position="1 0.75 -3"
            radius="0.5"
            height="1.5"
            color="#FFC65D"
        ></a-cylinder>
        <a-plane
            position="0 0 -4"
            rotation="-90 0 0"
            width="4"
            height="4"
            color="#7BC8A4"
        ></a-plane>

        <!-- Larger ground plane for walking around -->
        <a-plane
            position="0 0 0"
            rotation="-90 0 0"
            width="20"
            height="20"
            color="#7BC8A4"
            material="opacity: 0.8"
        ></a-plane>
        
        <!-- Touch controls for mobile -->
        <a-entity id="touch-controls" 
                  position="0 2 -3"
                  geometry="primitive: plane; width: 3; height: 1.5"
                  material="color: #333; opacity: 0.8"
                  text="value: Tap to enable room tracking\nMove around physically to see trail; 
                        align: center; 
                        color: white; 
                        width: 6"
                  class="clickable">
        </a-entity>

    </a-scene>

    <!-- Room tracking activation button -->
    <div id="tracking-ui" style="position: absolute; top: 20px; left: 20px; z-index: 100;">
        <button id="enable-tracking" style="
            background: #ff6b6b; 
            color: white; 
            border: none; 
            padding: 15px 20px; 
            border-radius: 5px; 
            font-size: 16px;
            cursor: pointer;">
            Enable Motion Tracking
        </button>
        <button id="reset-position" style="
            background: #4CAF50; 
            color: white; 
            border: none; 
            padding: 10px 15px; 
            border-radius: 5px; 
            font-size: 14px;
            cursor: pointer;
            margin-left: 10px;
            display: none;">
            Reset Position
        </button>
        <div id="tracking-status" style="
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 10px; 
            margin-top: 10px; 
            border-radius: 5px;
            display: none;">
        </div>
        <div id="debug-info" style="
            background: rgba(0,0,0,0.6); 
            color: #00ff00; 
            padding: 5px; 
            margin-top: 5px; 
            border-radius: 3px;
            font-family: monospace;
            font-size: 12px;
            display: none;">
        </div>
    </div>


    <script
        type="module"
        src="/src/main.js"
    ></script>
</body>

</html>